import os
import sys

root_dir = os.path.normpath(os.path.dirname(os.path.realpath(__file__)) + "/..")
sys.path.insert(0, root_dir)
import ai2thor.controller

import time
import random

c = ai2thor.controller.Controller(
    scene="FloorPlan1_physics",
    gridSize=0.25,
    width=900,
    height=900,
    agentMode="arm",
    fieldOfView=100,
    agentControllerType="mid-level",
    targetFrameRate=30,
    fixedDeltaTime=0.02,
)

print(c.build_url())
event = c.step(
    action="TeleportFull",
    x=-1,
    y=0.9009995460510254,
    z=1,
    rotation=dict(x=0, y=180, z=0),
    horizon=0,
)
event = c.step(
    action="MoveMidLevelArm",
    disableRendering=False,
    position=dict(x=0.01, y=0, z=0.01),
    speed=2,
    returnToStart=False,
    handCameraSpace=False,
)
event = c.step(
    action="MoveArmBase", disableRendering=False, y=0.9, speed=2, returnToStart=False
)

pose = {"x": -1.0, "y": 0.9009995460510254, "z": 1, "rotation": 135, "horizon": 0}
event = c.step(
    action="TeleportFull",
    x=pose["x"],
    y=pose["y"],
    z=pose["z"],
    rotation=dict(x=0.0, y=pose["rotation"], z=0.0),
    horizon=pose["horizon"],
)


actions = [
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.059573404, "y": 0.0, "z": 0.0281161666},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.8314809351552201,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.8018513467217335,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.7722217582882469,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.7425921698547602,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.7129625740138691,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.6833329855803827,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.6537033971468961,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295712, "y": 5.96046448e-08, "z": 0.0781169713},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295711979, "y": 0.0, "z": 0.098116833},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.029570736, "y": 1.1920929e-07, "z": 0.11811674},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.02957208, "y": 0.0, "z": 0.13811702},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295723379, "y": -1.1920929e-07, "z": 0.15811688000000002},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.02957233, "y": 1.1920929e-07, "z": 0.17811683099999998},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295722485, "y": 0.0, "z": 0.198116782},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.02957207, "y": -2.38418579e-07, "z": 0.2181169},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.029571943, "y": -1.1920929e-07, "z": 0.23811695300000002},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295718536, "y": -1.1920929e-07, "z": 0.258116919},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295715183, "y": -1.1920929e-07, "z": 0.278117019},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295714289, "y": -1.1920929e-07, "z": 0.298117208},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295709223, "y": -1.1920929e-07, "z": 0.31811716},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295703411, "y": 0.0, "z": 0.338116872},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295695812, "y": -2.38418579e-07, "z": 0.358116376},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {},
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0295692533, "y": 0.0, "z": 0.378115761},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.6240738087134093,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5944442202799227,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.020431030000000003, "y": -5.96046448e-08, "z": 0.3481152},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.00956957, "y": -2.38418579e-07, "z": 0.398114669},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569496, "y": -1.1920929e-07, "z": 0.41811468},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569377, "y": -1.1920929e-07, "z": 0.43811484},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {"action": ""},
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569332, "y": -1.1920929e-07, "z": 0.4581149},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569213, "y": -2.38418579e-07, "z": 0.478115},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5648146688834588,
        "speed": 2,
        "returnToStart": False,
    },
    {"action": ""},
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5351850508203542,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5055554327572495,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.47592585913857194,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.47592585913857194,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569228, "y": -2.38418579e-07, "z": 0.498115051},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569168, "y": -2.38418579e-07, "z": 0.51811533},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.009569213, "y": -1.1920929e-07, "z": 0.5381154300000001},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {"action": ""},
    {"action": "PickUpMidLevelHand"},
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.575925859138572,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.059569168000000006, "y": -2.98023224e-07, "z": 0.508115649},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.07956888000000001, "y": -3.57627869e-07, "z": 0.5081153},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495688021, "y": -2.38418579e-07, "z": 0.558114934},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {},
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495688021, "y": -3.57627869e-07, "z": 0.5781150340000001},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495687425, "y": -2.38418579e-07, "z": 0.5981153},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495686531, "y": -2.38418579e-07, "z": 0.6181155},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495686829, "y": -2.38418579e-07, "z": 0.6381157000000001},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495687127, "y": -3.57627869e-07, "z": 0.6181159},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495687127, "y": -4.76837158e-07, "z": 0.638116169},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495688319, "y": 0.0, "z": 0.6181162},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495688021, "y": 0.0, "z": 0.6381164},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.0495688021, "y": -2.38418579e-07, "z": 0.6181165000000001},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5055554327572495,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5203702417888018,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5351850508203542,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveArmBase",
        "disableRendering": False,
        "y": 0.5499998598519065,
        "speed": 2,
        "returnToStart": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.00043116810000000394, "y": -1.1920929e-07, "z": 0.5881169},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.020431060000000004, "y": -1.1920929e-07, "z": 0.5881164},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.0004312277000000017, "y": -2.38418579e-07, "z": 0.5881171},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.020431149000000003, "y": 0.0, "z": 0.588116944},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.0004310200000000042, "y": -2.38418579e-07, "z": 0.5881175},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.07956903, "y": -1.1920929e-07, "z": 0.588117361},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.059569168000000006, "y": -3.57627869e-07, "z": 0.5881177},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.039569217000000004, "y": 2.38418579e-07, "z": 0.588118434},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": 0.019569176400000002, "y": -2.38418579e-07, "z": 0.588119},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.0004308938999999998, "y": -2.38418579e-07, "z": 0.5881196},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.020430815199999994, "y": -1.1920929e-07, "z": 0.5881202},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {
            "x": -0.040430869999999994,
            "y": -2.38418579e-07,
            "z": 0.588120937,
        },
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {},
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.060430716999999995, "y": -1.1920929e-07, "z": 0.5881218},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.08043068299999999, "y": 0.0, "z": 0.588122368},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.10043055999999999, "y": 0.0, "z": 0.5881231},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.12043055600000001, "y": 0.0, "z": 0.5881235},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.140430626, "y": -2.38418579e-07, "z": 0.588124156},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {
        "action": "MoveMidLevelArm",
        "disableRendering": False,
        "position": {"x": -0.16043072600000002, "y": 0.0, "z": 0.588124752},
        "speed": 2,
        "returnToStart": False,
        "handCameraSpace": False,
    },
    {},
]
counter = 0
for a in actions:
    if a == {} or a == {"action": ""}:
        continue
    a["disableRendering"] = True
    c.step(a)
